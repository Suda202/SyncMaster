# 产品需求文档 (PRD): AI SyncMaster

**版本**: v1.7
**更新日期**: 2025-01-18
**核心功能**: 多平台 AI 同步查询 + 智能分屏对比

---

## 0. 版本历史

| 版本 | 日期 | 主要变更 |
|------|------|----------|
| v1.7 | 2025-01-18 | Coral + Indigo 配色，计数器移到 header，按钮改 GO |
| v1.6 | 2025-01-18 | UI 改版 Neo-Brutalist 风格，新增快捷键 Ctrl+Shift+S |
| v1.5 | 2025-11-06 | 智能分屏与视窗管理 (Smart Split View) |
| v1.0 | 2025-11-06 | 基础框架搭建 |

---

## 1. 产品定义

将 Chrome 浏览器的新标签页升级为支持「传统搜索 + 多模型 AI 同步 + 多视角对比」的智能工作台。

---

## 2. 使用前提

用户需要**事先登录**各 AI 平台的官网账号，插件才能成功打开并使用这些服务：

- ChatGPT：需登录 chat.openai.com
- Claude：需登录 claude.ai
- Gemini：需登录 gemini.google.com
- 其他平台同理

**说明**：插件仅负责打开页面并填入内容，不处理账号登录流程。

---

## 3. 核心用户体验

### 3.1 界面布局 (Neo-Brutalist 风格)

**设计风格**: 新野兽派 (Neo-Brutalism)
- 粗黑边框 (3-4px)
- 硬阴影 (无模糊)
- 高对比度配色
- 等宽字体 (Space Mono)
- 几何图标

**布局结构**:
- 标题栏：蓝色背景 + 白字
- 输入区域：多行文本框
- 平台选择：3x2 网格布局 + 计数器
- 发送按钮：绿色 + 大按钮（GO）

### 3.2 快捷键

- **Windows/Linux**: `Ctrl+Shift+S`
- **macOS**: `Command+Shift+S`

按下快捷键打开扩展 popup，再次按下关闭。

### 3.3 核心交互流程

**用户操作：**

1. 输入内容 / 拖入文件
2. 勾选目标（如：ChatGPT、Claude、Gemini）
3. 点击 GO

**系统响应（基于勾选数量 N）：**

| 模式 | 条件 | 行为 |
|------|------|------|
| **单兵模式** | N = 1 | 当前窗口新开标签页 |
| **双屏模式** | N = 2 | 弹出 2 个独立窗口，左右各占 50% |
| **三屏模式** | N = 3 | 弹出 3 个独立窗口，各占 33% |
| **扩展模式** | N > 3 | 固定 3 个窗口，每个窗口内用 Tab 页承载多个目标 |

---

## 4. 功能详细说明

### 4.1 智能分屏布局规则

**2 分屏（N=2）：**
- 窗口 1：左半屏（50%）
- 窗口 2：右半屏（50%）

**3 分屏（N=3）：**
- 窗口 1：左侧（33%）
- 窗口 2：中间（33%）
- 窗口 3：右侧（33%）

**窗口聚焦：** 分屏完成后，自动聚焦到最左侧窗口（符合从左到右的阅读习惯）

### 4.2 扩展模式（N > 3）

当用户勾选超过 3 个目标时，系统固定创建 3 个窗口，通过 Tab 页来承载多个目标：

**分配规则：** 按顺序轮流分配到 3 个窗口

**示例 - 选中 6 个目标：**
- 窗口 1（左）：Tab 1 + Tab 2
- 窗口 2（中）：Tab 3 + Tab 4
- 窗口 3（右）：Tab 5 + Tab 6

**示例 - 选中 4 个目标：**
- 窗口 1（左）：Tab 1 + Tab 2
- 窗口 2（中）：Tab 3
- 窗口 3（右）：Tab 4

**示例 - 选中 5 个目标：**
- 窗口 1（左）：Tab 1 + Tab 2
- 窗口 2（中）：Tab 3 + Tab 4
- 窗口 3（右）：Tab 5

**设计理由：**
- 一屏最多 3 窗是体验边界，再多页面会触发移动端视图
- 用 Tab 页切换比最小化窗口更方便
- 用户可以在同一窗口内快速对比同类模型的回复

---

## 5. 异常流程处理

### 5.1 弹窗拦截

**问题**：浏览器可能拦截插件一次性打开多个窗口

**处理**：
- 首次使用时检测是否被拦截
- 若被拦截，在界面顶部显示提示：「请允许本插件管理弹出窗口」
- 提供跳转到 Chrome 设置的快捷入口

### 5.2 多显示器

默认在浏览器当前所在的显示器进行分屏布局

---

## 7. 支持的平台

| 平台 | 图标 | 支持功能 |
|------|------|----------|
| **ChatGPT** | 绿色 + 同心圆 | 文本、图片、文件 |
| **Claude** | 棕金 + 方块 | 文本、图片、文件 |
| **Gemini** | 蓝色 + 双圆 | 文本、图片、文件 |
| **Google** | 四色圆 | 文本 |
| **Perplexity** | 黑色 + P | 文本、图片 |
| **Grok** | 全黑 + 准星 | 文本、图片 |

---

## 8. 文件结构

```
SyncMaster/
├── manifest.json        # 扩展配置
├── popup.html          # 弹窗页面
├── popup.css           # Neo-Brutalist 样式
├── popup.js            # 主逻辑
├── platforms.js        # 平台配置
├── content.js          # 内容脚本（自动填单）
├── icons/              # 图标文件
│   ├── icon16.png
│   ├── icon48.png
│   └── icon128.png
└── docs/               # 文档
    ├── PRD.md          # 产品需求文档
    ├── ARCHITECTURE.md # 架构文档
    └── DEVLOG.md       # 开发日志
```

---

## 9. 更新日志

详见 [DEVLOG.md](./DEVLOG.md)

